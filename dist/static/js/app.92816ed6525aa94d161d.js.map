{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/main.js","webpack:///./src/assets/img/btn-close.png"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","default","object","property","prototype","hasOwnProperty","p","s","Vtdi","e","Array","isArray","length","from","app","utils","store","$","selector","node","document","querySelector","formatTime","timeStamp","time","Date","year","getFullYear","month","getMonth","date","getDate","hour","getHours","minute","getMinutes","second","getSeconds","to2bit","num","on","addEventListener","element","event","handler","attachEvent","off","removeEventListener","detachEvent","__store_key","set","id","content","notes","this","getNotes","assign","localStorage","JSON","stringify","jsonStr","window","parse","remove","startX","startY","moveNote","maxZIndex","noteTpl","Note","options","note","createElement","className","now","innerHTML","style","left","top","zIndex","body","appendChild","updateTime","updateTimeStamp","addEvent","init","keys","forEach","save","dataStore","offsetLeft","offsetTop","updateTimeInMS","close","removeChild","ms","nowTimeStamp","formatTimeStr","inputTimer","that","btnClose","handleMousedown","ev","setCapture","clientX","clientY","editNote","clearTimeout","setTimeout","handleCloseClick","confirm","Math","floor","random","innerWidth","innerHeight","L","T","width","documentElement","clientWidth","offsetWidth","height","clientHeight","offsetHeight","releaseCapture","concat","_toConsumableArray","querySelectorAll","click","pLGG"],"mappings":"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","file":"static/js/app.92816ed6525aa94d161d.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"Vtdi\");\n","/**\n * @file main.js\n * @desc 便签\n * @version 0.1.2\n * @author 轩辕Rowboat <lxchuan12@163.com>\n * @date 2017-07-02\n * @update 2018-04-30\n * @copyright 2017\n */\nimport './styles/index';\nimport './assets/img/btn-close.png';\n// app\nvar app = {\n\tutils: {},\n\tstore: {}\n};\n// 工具函数\napp.utils = {\n\t// 获取单个元素\n\t$: function(selector, node){\n\t\treturn (node || document).querySelector(selector);\n\t},\n\t// 格式化时间\n\tformatTime: function(timeStamp){\n\t\tvar time = new Date(timeStamp);\n\t\tvar year = time.getFullYear();\n\t\tvar month = time.getMonth() + 1;\n\t\tvar date = time.getDate();\n\t\tvar hour = time.getHours();\n\t\tvar minute = time.getMinutes();\n\t\tvar second = time.getSeconds();\n\n\t\tfunction to2bit(num){\n\t\t\tif(num > 9){\n\t\t\t\treturn num;\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn '0' + num;\n\t\t\t}\n\t\t}\n\t\treturn year + '-' + to2bit(month) + '-' + to2bit(date) + ' ' + to2bit(hour) + ':' + to2bit(minute) + ':' + to2bit(second);\n\t},\n\t/**\n\t * 绑定事件\n\t * @author luoxiaochuan <lxchuan12@163.com>\n\t * @date 2018-05-10\n\t */\n\ton: (function(){\n\t\tif(document.addEventListener){\n\t\t\treturn function(element, event, handler){\n\t\t\t\tif(element && event && handler){\n\t\t\t\t\telement.addEventListener(event, handler, false);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\telse{\n\t\t\treturn function(element, event, handler){\n\t\t\t\tif(element && event && handler){\n\t\t\t\t\telement.attachEvent('on' + event, handler);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t})(),\n\t/**\n\t * 取消事件\n\t * @author luoxiaochuan <lxchuan12@163.com>\n\t * @date 2018-05-10\n\t */\n\toff: (function(){\n\t\tif(document.removeEventListener){\n\t\t\treturn function(element, event, handler){\n\t\t\t\tif(element && event && handler){\n\t\t\t\t\telement.removeEventListener(event, handler, false);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\telse{\n\t\t\treturn function(element, event, handler){\n\t\t\t\tif(element && event && handler){\n\t\t\t\t\telement.detachEvent('on' + event, handler);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t})(),\n};\n// 数据存储到本地\napp.store = {\n\t__store_key: '__store_note',\n\tset: function (id, content){\n\t\t// debugger;\n\t\tvar notes = this.getNotes();\n\t\tif(notes[id]){\n\t\t\tObject.assign(notes[id], content);\n\t\t}\n\t\telse{\n\t\t\tnotes[id] = content;\n\t\t}\n\t\tlocalStorage[this.__store_key] = JSON.stringify(notes);\n\t},\n\tget: function (){\n\t\tvar jsonStr = window.localStorage[this.__store_key];\n\t\treturn JSON.parse(jsonStr);\n\t},\n\tremove: function (id){\n\t\tvar notes = this.getNotes();\n\t\tdelete notes[id];\n\t\tlocalStorage[this.__store_key] = JSON.stringify(notes);\n\t},\n\tgetNotes: function(){\n\t\treturn JSON.parse(localStorage[this.__store_key] || '{}');\n\t}\n};\n// 立即执行函数\n(function (utils, store){\n\tvar $ = utils.$;\n\tvar formatTime = utils.formatTime;\n\tvar on = utils.on;\n\tvar off = utils.off;\n\tvar moveNote = null;\n\t// 是否限制拖拽范围在可视区 上边缘和左边缘磁性吸附\n\tvar isLimitRange = true;\n\tvar startX;\n\tvar startY;\n\tvar maxZIndex = 0;\n\tvar noteTpl = `\n\t\t<i class=\"u-close\"></i>\n\t\t<div class=\"u-bar\"></div>\n\t\t<div class=\"u-edit\"  contenteditable=\"true\"></div>\n\t\t<div class=\"m-time\"><span>更新：</span><span class=\"u-timestamp\">2017-07-02 15:09:02<span></div>`;\n\t/**\n\t * 创建便签\n\t * @author luoxiaochuan <lxchuan12@163.com>\n\t * @date 2018-04-30\n\t * @param {Object} options\n\t */\n\tfunction Note(options){\n\t\tvar note = document.createElement('div');\n\t\tnote.className = 'm-note';\n\t\tnote.id = options.id || 'm-note-' + Date.now();\n\t\tnote.innerHTML = noteTpl;\n\t\t$('.u-edit', note).innerHTML = options.content || '';\n\t\tnote.style.left = options.left + 'px';\n\t\tnote.style.top = options.top + 'px';\n\t\tnote.style.zIndex = options.zIndex;\n\t\tdocument.body.appendChild(note);\n\t\tthis.note = note;\n\t\tthis.updateTime(options.updateTimeStamp);\n\t\tthis.addEvent();\n\t}\n\t/**\n\t * 初始化便签\n\t * @author luoxiaochuan <lxchuan12@163.com>\n\t * @date 2018-04-30\n\t */\n\tNote.prototype.init = function(){\n\t\tvar notes = store.getNotes();\n\t\tObject.keys(notes).forEach(function(id){\n\t\t\tvar options = notes[id];\n\t\t\tif(maxZIndex < options.zIndex){\n\t\t\t\tmaxZIndex = options.zIndex;\n\t\t\t}\n\t\t\tvar note = new Note(Object.assign(options, {\n\t\t\t\tid: id\n\t\t\t}));\n\t\t\tconsole.log('init-note', note);\n\t\t});\n\t\tmaxZIndex += 1;\n\t};\n\t/**\n\t * 便签保存\n\t * @author luoxiaochuan <lxchuan12@163.com>\n\t * @date 2018-04-30\n\t */\n\tNote.prototype.save = function (){\n\t\tvar that = this;\n\t\tvar dataStore = {\n\t\t\tzIndex: that.note.style.zIndex,\n\t\t\tleft: that.note.offsetLeft,\n\t\t\t// 弄清offsetLeft 和 left 的区别 前者只读，后者可读可写\n\t\t\t// left: parseInt(that.note.style.left),\n\t\t\ttop: that.note.offsetTop,\n\t\t\tcontent: $('.u-edit', that.note).innerHTML,\n\t\t\tupdateTimeStamp: that.updateTimeInMS\n\t\t};\n\t\tstore.set(this.note.id, dataStore);\n\t};\n\t/**\n\t * 便签关闭\n\t * @author luoxiaochuan <lxchuan12@163.com>\n\t * @date 2018-04-30\n\t */\n\tNote.prototype.close = function (){\n\t\tdocument.body.removeChild(this.note);\n\t};\n\t/**\n\t * 便签更新时间\n\t * @author luoxiaochuan <lxchuan12@163.com>\n\t * @date 2018-04-30\n\t */\n\tNote.prototype.updateTime = function (ms){\n\t\tvar nowTimeStamp = ms || Date.now();\n\t\tvar formatTimeStr = formatTime(nowTimeStamp);\n\t\t$('.m-time .u-timestamp', this.note).innerHTML = formatTimeStr;\n\t\tthis.updateTimeInMS = nowTimeStamp;\n\t};\n\t/**\n\t * 便签添加事件\n\t * @author luoxiaochuan <lxchuan12@163.com>\n\t * @date 2018-04-30\n\t */\n\tNote.prototype.addEvent = function (){\n\t\tlet that = this;\n\t\tvar btnClose = $('.u-close', this.note);\n\t\t// 便签的 mousedown 事件\n\t\tvar handleMousedown = function (ev){\n\t\t\t// console.log(ev);\n\t\t\tmoveNote = that.note;\n\t\t\tif(moveNote.setCapture){\n\t\t\t\tmoveNote.setCapture();\n\t\t\t}\n\t\t\tstartX = ev.clientX - that.note.offsetLeft;\n\t\t\tstartY = ev.clientY - that.note.offsetTop;\n\t\t\tif(moveNote.style.zIndex !== maxZIndex - 1){\n\t\t\t\tmoveNote.style.zIndex = maxZIndex++;\n\t\t\t\tstore.set(moveNote.id, {\n\t\t\t\t\tzIndex: maxZIndex - 1\n\t\t\t\t});\n\t\t\t}\n\t\t\t// console.log('mousedown');\n\t\t};\n\t\ton($('.u-bar', that.note), 'mousedown', handleMousedown);\n\t\tvar inputTimer;\n\t\t// 便签的 input 输入事件\n\t\tvar editNote = $('.u-edit', that.note);\n\t\tvar handleInput = function (ev){\n\t\t\t// console.log('handleInput');\n\t\t\tvar content = editNote.innerHTML;\n\t\t\tclearTimeout(inputTimer);\n\t\t\tinputTimer = setTimeout(function (){\n\t\t\t\tvar time = Date.now();\n\t\t\t\tstore.set(that.note.id, {\n\t\t\t\t\tcontent: content,\n\t\t\t\t\tupdateTimeStamp: time\n\t\t\t\t});\n\t\t\t\tthat.updateTime(time);\n\t\t\t}, 300);\n\t\t};\n\t\ton(editNote, 'input', handleInput);\n\t\t// 便签的 关闭 事件\n\t\tvar handleCloseClick = function (ev){\n\t\t\t// 不为空时提示是否删除。\n\t\t\tvar content = editNote.innerHTML;\n\t\t\tif(content !== ''){\n\t\t\t\tvar result = window.confirm('是否要删除此便签？');\n\t\t\t\tif(!result){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tstore.remove(that.note.id);\n\t\t\t// console.log('close click', that.note);\n\t\t\t// 关闭的同时移除事件\n\t\t\toff(btnClose, 'click', handleCloseClick);\n\t\t\toff(that.note, 'mousedown', handleMousedown);\n\t\t\tthat.close();\n\t\t};\n\t\ton(btnClose, 'click', handleCloseClick);\n\t};\n\ton(document, 'DOMContentLoaded', function (e){\n\t\t// 初始化保存在localstorage里的便签\n\t\tfunction initLocal(){\n\t\t\t// debugger;\n\t\t\tvar notes = store.getNotes();\n\t\t\t// console.log('initLocal function notes', notes);\n\t\t\tObject.keys(notes).forEach(function(id){\n\t\t\t\tvar options = notes[id];\n\t\t\t\t// console.log('initLocal',options);\n\t\t\t\tif(maxZIndex < options.zIndex){\n\t\t\t\t\tmaxZIndex = options.zIndex;\n\t\t\t\t}\n\t\t\t\tvar note = new Note(Object.assign(options, {\n\t\t\t\t\tid: id\n\t\t\t\t}));\n\t\t\t\tconsole.log('initLocal', note);\n\t\t\t});\n\t\t\tmaxZIndex += 1;\n\t\t}\n\t\tinitLocal();\n\t\tvar handleBtnCreate = function (){\n\t\t\tvar options = {\n\t\t\t\tleft: Math.floor(Math.random() * (window.innerWidth - 200)),\n\t\t\t\ttop: Math.floor(Math.random() * (window.innerHeight - 250)),\n\t\t\t\tzIndex: maxZIndex++\n\t\t\t};\n\t\t\tvar note = new Note(options);\n\t\t\tnote.save();\n\t\t};\n\t\tvar handleMousemove = function (ev){\n\t\t\tif(!moveNote){\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar L = ev.clientX - startX;\n\t\t\tvar T = ev.clientY - startY;\n\n\t\t\tif(isLimitRange){\n\t\t\t\tvar width = document.documentElement.clientWidth - moveNote.offsetWidth;\n\t\t\t\tvar height = document.documentElement.clientHeight - moveNote.offsetHeight;\n\t\t\t\tif(L < 0){\n\t\t\t\t\tL = 0;\n\t\t\t\t}\n\t\t\t\telse if(L > width){\n\t\t\t\t\tL = width;\n\t\t\t\t}\n\n\t\t\t\tif(T < 0){\n\t\t\t\t\tT = 0;\n\t\t\t\t}\n\t\t\t\telse if(T > height){\n\t\t\t\t\tT = height;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tmoveNote.style.left = L + 'px';\n\t\t\tmoveNote.style.top = T + 'px';\n\t\t\t// console.log('move', ev);\n\t\t};\n\t\tvar handleMouseup = function (){\n\t\t\tif(!moveNote){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tstore.set(moveNote.id, {\n\t\t\t\tleft: moveNote.offsetLeft,\n\t\t\t\ttop: moveNote.offsetTop\n\t\t\t});\n\t\t\tif(moveNote.releaseCapture){\n\t\t\t\tmoveNote.releaseCapture();\n\t\t\t}\n\t\t\tmoveNote = null;\n\t\t\t// 把事件解除\n\t\t\t// off(document, 'mousemove', handleMousemove);\n\t\t};\n\t\t// 清除所有的便签\n\t\tvar handleBtnRemoveAllNotes = function (){\n\t\t\t// 有便签就提示是否删除所有便签\n\t\t\tvar hasNote = [...document.querySelectorAll('.m-note')].length > 0;\n\t\t\tif(hasNote){\n\t\t\t\tvar result = window.confirm('是否要清除所有便签？');\n\t\t\t\tif(!result){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 思路1：主动触发把所有的便签关闭事件\n\t\t\t[...document.querySelectorAll('.u-close')].forEach((element) => {\n\t\t\t\telement.click();\n\t\t\t});\n\t\t};\n\t\t// 创建便签\n\t\ton($('#create'), 'click', handleBtnCreate);\n\t\ton(document, 'mousemove', handleMousemove);\n\t\ton(document, 'mouseup', handleMouseup);\n\t\t// 清除所有的便签\n\t\ton($('#remove'), 'click', handleBtnRemoveAllNotes);\n\t\t// console.log($('.m-note .u-close'));\n\t});\n}(app.utils, app.store));\n// console.log(1);\nif(module.hot){\n\t// 实现热更新\n\tmodule.hot.accept('./styles/index.less', function(){\n\t\tconsole.log('hot-accept-style-less-2');\n\t});\n}\n","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}