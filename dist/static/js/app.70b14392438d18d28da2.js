!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s="Vtdi")}({Vtdi:function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}n("pLGG"),n("ZuTw");var r,u,a,c,s,f,d,A,l,m,p,v={utils:{},store:{}};v.utils={$:function(e,t){return(t||document).querySelector(e)},formatTime:function(e){var t=new Date(e),n=t.getFullYear(),o=t.getMonth()+1,i=t.getDate(),r=t.getHours(),u=t.getMinutes(),a=t.getSeconds(),c=function(e){return 9<e?e:"0"+e};return n+"-"+c(o)+"-"+c(i)+" "+c(r)+":"+c(u)+":"+c(a)},on:document.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)},off:document.removeEventListener?function(e,t,n){e&&t&&n&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.detachEvent("on"+t,n)}},v.store={__store_key:"__store_note",set:function(e,t){var n=this.getNotes();n[e]?Object.assign(n[e],t):n[e]=t,localStorage[this.__store_key]=JSON.stringify(n)},get:function(){var e=window.localStorage[this.__store_key];return JSON.parse(e)},remove:function(e){var t=this.getNotes();delete t[e],localStorage[this.__store_key]=JSON.stringify(t)},getNotes:function(){return JSON.parse(localStorage[this.__store_key]||"{}")}},r=v.utils,u=v.store,a=r.$,c=r.formatTime,s=r.on,f=r.off,d=null,l=A=void 0,m=0,p=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var n=document.createElement("div");n.className="m-note",n.id=t.id||"m-note-"+Date.now(),n.innerHTML='\n\t\t<i class="u-close"></i>\n\t\t<div class="u-bar"></div>\n\t\t<div class="u-edit"  contenteditable="true"></div>\n\t\t<div class="m-time"><span>更新：</span><span class="u-timestamp">2017-07-02 15:09:02<span></div>',a(".u-edit",n).innerHTML=t.content||"",n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.zIndex=t.zIndex,document.body.appendChild(n),this.note=n,this.updateTime(t.updateTimeStamp),this.addEvent()}return o(e,[{key:"init",value:function(){var t=u.getNotes();Object.keys(t).forEach(function(n){var o=t[n];m<o.zIndex&&(m=o.zIndex),new e(Object.assign(o,{id:n}))}),m+=1}},{key:"save",value:function(){var e={zIndex:this.note.style.zIndex,left:this.note.offsetLeft,top:this.note.offsetTop,content:a(".u-edit",this.note).innerHTML,updateTimeStamp:this.updateTimeInMS};u.set(this.note.id,e)}},{key:"close",value:function(){document.body.removeChild(this.note)}},{key:"updateTime",value:function(e){var t=e||Date.now(),n=c(t);a(".m-time .u-timestamp",this.note).innerHTML=n,this.updateTimeInMS=t}},{key:"addEvent",value:function(){var e=this,t=a(".u-close",this.note),n=function(t){(d=e.note).setCapture&&d.setCapture(),A=t.clientX-e.note.offsetLeft,l=t.clientY-e.note.offsetTop,d.style.zIndex!==m-1&&(d.style.zIndex=m++,u.set(d.id,{zIndex:m-1}))};s(this.note,"mousedown",n);var o=void 0,i=a(".u-edit",this.note);s(i,"input",function(){var t=i.innerHTML;clearTimeout(o),o=setTimeout(function(){var n=Date.now();u.set(e.note.id,{content:t,updateTimeStamp:n}),e.updateTime(n)},300)}),s(t,"click",function o(r){(""===i.innerHTML||window.confirm("是否要删除此便签？"))&&(u.remove(e.note.id),f(t,"click",o),f(e.note,"mousedown",n),e.close())})}}]),e}(),s(document,"DOMContentLoaded",function(e){var t;t=u.getNotes(),Object.keys(t).forEach(function(e){var n=t[e];m<n.zIndex&&(m=n.zIndex),new p(Object.assign(n,{id:e}))}),m+=1,s(a("#create"),"click",function(){var e={left:Math.floor(Math.random()*(window.innerWidth-200)),top:Math.floor(Math.random()*(window.innerHeight-250)),zIndex:m++};new p(e).save()}),s(document,"mousemove",function(e){if(d){var t=e.clientX-A,n=e.clientY-l,o=document.documentElement.clientWidth-d.offsetWidth,i=document.documentElement.clientHeight-d.offsetHeight;t<0?t=0:o<t&&(t=o),n<0?n=0:i<n&&(n=i),d.style.left=t+"px",d.style.top=n+"px"}}),s(document,"mouseup",function(){d&&(u.set(d.id,{left:d.offsetLeft,top:d.offsetTop}),d.releaseCapture&&d.releaseCapture(),d=null)}),s(a("#remove"),"click",function(){0<[].concat(i(document.querySelectorAll(".m-note"))).length&&!window.confirm("是否要清除所有便签？")||[].concat(i(document.querySelectorAll(".u-close"))).forEach(function(e){e.click()})})})},ZuTw:function(e,t){e.exports="data:image/png;base64,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"},pLGG:function(e,t){}});